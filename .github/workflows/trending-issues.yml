# This workflow looks for trending issues and applies a label to them
# Issues are considered trending if they receive a significant number
# of positive reactions within a period of time

name: Find and label trending issues

on:
  schedule:
  - cron: '0,5,10,15,20,25,30,35,40,45,50,55 * * * *'
  
  workflow_dispatch:
    inputs:
      reactions:
        description: The minimum number of positive reactions (from unique users)
        required: true
        type: number
        default: '5'
      days:
        description: The maximum number of days within which the reactions need to occur
        required: true
        type: number
        default: '7'
      label:
        description: The label to apply for trending issues
        required: true
        default: 'trending'

jobs:
  trending-issues:
    runs-on: ubuntu-latest

    steps:
    - name: Find and label trending issues
      run: |
        echo "Finding trending issues..."
        echo "  Reactions: ${{ 0 || inputs.reactions || 5 }}"
        echo "  Days:      ${{ 34 || inputs.days || 7 }}"
        echo "  Label:     '${{ 'trending-issue' || inputs.label || 'trending' }}'"
