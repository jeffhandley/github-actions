name: "Backlog: Trending Issues"

on:
  schedule:
  - cron: '* * * * *'

  workflow_call:
    inputs:
      reactions:
        required: true
        type: number
      days:
        required: true
        type: number
      label:
        required: true
        type: string
  
  workflow_dispatch:
    inputs:
      reactions:
        description: The minimum number of positive reactions (from unique users)
        required: true
        type: number
        default: 5
      days:
        description: The maximum number of days within which the reactions need to occur
        required: true
        type: number
        default: 7
      label:
        description: The label to apply for trending issues
        required: true
        type: string
        default: 'trending'

jobs:
  trending-issues:
    runs-on: ubuntu-latest

    steps:
      - name: Label trending issues
        uses: jeffhandley/github-actions/actions/backlog/trending-issues@main
        with:
          reactions: ${{ fromJson(inputs.reactions || 5) }}
          days:      ${{ fromJson(inputs.days || 7) }}
          label:     ${{ inputs.label || 'trending' }}
